<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°ç£å¤©æ°£</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ===============================
            ğŸ¨ ä¸»é¡Œè®Šæ•¸
        =============================== */
        :root {
            /* é è¨­ MUJI æ—¥ç³» (æ·ºè‰²) */
            --muji-bg: #F8F6F1;
            --muji-card: #FFFFFF;
            --muji-cream: #FFFDF8;
            --muji-green: #DDECE2;
            --muji-orange: #F8DCC4; 
            --muji-brown: #7B6C57;
            --muji-text: #4A4A4A;
            --muji-line: #E7E2D9;
            
            /* Active City Button */
            --active-bg: var(--muji-green);
            --active-text: var(--muji-brown);
            
            /* ===== æ–°å¢ï¼šæ·±è‰²æ¨¡å¼é å ±å¡ç‰‡å’Œæ™‚é–“çš„æ©˜è‰² ===== */
            --muji-orange-dark: #E8B8A0;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--muji-bg);
            color: var(--muji-text);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 20px;
            transition: background 0.6s ease, color 0.6s ease;
        }

        /* ===============================
            ğŸ“Œ ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• (åœ–åƒå¼)
            (å·²ç§»é™¤ fixed å®šä½ï¼Œæ”¹ç‚º flex å…§è¯)
        =============================== */
        .theme-switcher {
            display: flex;
            gap: 6px;
            z-index: 200;
            padding: 4px;
            /* æ·ºè‰²ç£¨ç ‚èƒŒæ™¯ */
            background: rgba(255, 255, 255, 0.4); 
            backdrop-filter: blur(8px);
            border-radius: 16px;
            border: 1px solid var(--muji-line);
        }

        /* éš±è—èˆŠçš„æ–‡å­—æŒ‰éˆ•æ¨£å¼ */
        .theme-btn {
            display: none; 
        }

        .theme-icon {
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            transition: all 0.2s;
            background: transparent;
            border: 2px solid transparent; /* é è¨­ç„¡é‚Šæ¡† */
            color: var(--muji-text); /* åœ–ç¤ºé¡è‰² */
        }
        
        .theme-preview {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            opacity: 0.8;
            z-index: -1;
            transition: all 0.2s;
        }

        .theme-icon.active {
            /* ä½¿ç”¨å¼·èª¿è‰²ä½œç‚ºé‚Šæ¡†ï¼Œä¸¦åŠ ä¸Šå¡ç‰‡èƒŒæ™¯çš„å…§é™°å½± */
            border: 2px solid var(--muji-brown); 
            transform: scale(1.05);
            box-shadow: 0 0 0 2px var(--muji-card); 
        }

        /* ===============================
            ç‹€æ…‹åˆ—
        =============================== */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 20px;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(12px);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--muji-line);
        }
        
        /* æ–°å¢ï¼šå³å´å®¹å™¨æ¨£å¼ï¼ŒåŒ…å«æ›´æ–°æ™‚é–“å’Œä¸»é¡Œåˆ‡æ›å™¨ */
        .status-right {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .location-pill {
            /* åŸå¸‚è³‡è¨Šè—¥ä¸¸ï¼šèƒŒæ™¯ä½¿ç”¨ orangeï¼Œæ–‡å­—ä½¿ç”¨ brown (å¼·èª¿è‰²) */
            background: var(--muji-orange);
            color: var(--muji-brown);
            padding: 6px 16px;
            border-radius: 18px;
            font-weight: 600;
            font-size: 1.05rem;
            border: 1px solid var(--muji-line); 
        }

        /* ===== ä¿®æ”¹1ï¼šæ·±è‰²æ¨¡å¼ä¸‹çš„æ›´æ–°æ™‚é–“æ–‡å­—é¡è‰² ===== */
        .update-pill {
            font-size: 0.8rem;
            color: var(--muji-text);
            background: rgba(255, 255, 255, 0.6);
            padding: 4px 12px;
            border-radius: 12px;
            border: 1px solid var(--muji-line);
        }

        body.dark-mode .update-pill {
            color: var(--muji-orange-dark);
        }

        .container {
            padding: 22px;
            max-width: 640px;
            margin: auto;
        }

        /* ===============================
            åŸå¸‚é¸æ“‡
        =============================== */
        .city-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            padding: 18px;
            border-radius: 20px;
            background: var(--muji-cream);
            border: 1px solid var(--muji-line);
        }

        .city-btn {
            background: var(--muji-card);
            border: 1px solid var(--muji-line);
            border-radius: 16px;
            padding: 10px 8px;
            font-size: 0.95rem;
            color: var(--muji-text);
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .city-btn.active {
            background: var(--muji-green);
            border-color: var(--muji-line);
            font-weight: 600;
            color: var(--muji-brown);
        }

        .city-btn:active {
            transform: scale(0.97);
        }

        /* ===============================
            Hero Card
        =============================== */
        .hero-card {
            background: var(--muji-card);
            border-radius: 28px;
            padding: 40px 20px 30px;
            text-align: center;
            margin-top: 35px;
            border: 1px solid var(--muji-line);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
            position: relative;
            transition: background 0.5s ease, color 0.5s ease;
        }

        .hero-period {
            position: absolute;
            padding: 5px 18px;
            background: var(--muji-green);
            border-radius: 14px;
            border: 1px solid var(--muji-line);
            color: var(--muji-brown);
            font-size: 0.85rem;
            font-weight: 600;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
        }

        .hero-temp-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 14px;
            margin: 20px 0;
        }

        .hero-icon {
            font-size: 4rem;
        }

        .hero-temp {
            font-size: 4rem;
            font-weight: 700;
            color: var(--muji-brown); /* ä½¿ç”¨å¼·èª¿è‰² */
            line-height: 1;
        }

        .hero-desc {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: var(--muji-text);
            font-weight: 500;
        }

        /* ===============================
            å»ºè­°å€
        =============================== */
        .advice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
            padding-top: 20px;
            border-top: 1px solid var(--muji-line);
        }

        .advice-item {
            background: var(--muji-cream);
            padding: 15px;
            border-radius: 18px;
            border: 1px solid var(--muji-line);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background 0.3s ease;
        }

        .advice-label {
            font-size: 0.8rem;
            color: #999;
            margin-bottom: 5px;
        }

        .advice-text {
            font-weight: 700;
            color: var(--muji-brown); /* ä½¿ç”¨å¼·èª¿è‰² */
            font-size: 1.1rem;
        }

        /* ===============================
            æœªä¾†é å ±
        =============================== */
        .section-title {
            font-size: 1.1rem;
            color: var(--muji-brown); /* ä½¿ç”¨å¼·èª¿è‰² */
            margin: 30px 0 15px 5px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 16px;
            padding-bottom: 10px;
            scrollbar-width: none;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .mini-card {
            min-width: 120px;
            padding: 20px 14px;
            background: var(--muji-card);
            border-radius: 18px;
            border: 1px solid var(--muji-line);
            text-align: center;
            flex-shrink: 0;
            opacity: 0;
            animation: fadeInUp 0.5s forwards;
        }

        .mini-time {
            background: var(--muji-green);
            color: var(--muji-brown);
            padding: 4px 12px;
            font-size: 0.8rem;
            border-radius: 10px;
            border: 1px solid var(--muji-line);
            margin-bottom: 10px;
            display: inline-block;
            font-weight: 600;
        }

        /* ===== ä¿®æ”¹2ï¼šæ·±è‰²æ¨¡å¼ä¸‹çš„é å ±å¡ç‰‡æ™‚é–“æ¨™ç±¤é¡è‰² ===== */
        body.dark-mode .mini-time {
            color: var(--muji-orange-dark);
        }

        .mini-icon {
            font-size: 2.2rem;
            margin: 8px 0;
        }

        .mini-temp {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--muji-text);
        }

        .mini-rain {
            font-size: 0.8rem;
            color: #7B9EBD;
            margin-top: 5px;
            font-weight: 500;
        }

        /* ===============================
            Loading
        =============================== */
        .loading-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--muji-bg);
            z-index: 999;
            transition: opacity 0.6s ease;
        }

        .hidden {
            opacity: 0;
            pointer-events: none;
        }

        @keyframes gentle-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===============================
            å¤©æ°£å‹•æ…‹èƒŒæ™¯ CSS é¡åˆ¥
        =============================== */
        .bg-sunny { background: #FFF5E1; }
        .bg-cloudy { background: #E3E6E8; }
        .bg-rainy { background: #D6E4EE; }
        .bg-night { background: #2B2B3A; color: #EEE; }

        /* ===============================
            æ‰‹ç¹ªé›²æœµ / å¤ªé™½
        =============================== */
        .weather-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        /* ===== ä¿®æ­£ï¼šå¤ªé™½ä½ç½®èª¿æ•´ï¼Œé¿å…è¢«é ‚éƒ¨æ“‹ä½ ===== */
        .sun {
            position: fixed;
            bottom: 10%;
            right: 8%;
            font-size: 5rem;
            animation: spin-sun 20s linear infinite;
            display: none;
            opacity: 0.6;
            z-index: 1;
        }

        .cloud {
            position: absolute;
            font-size: 3rem;
            opacity: 0.6;
            animation: cloud-move linear infinite;
            display: none;
            filter: blur(1px);
        }

        @keyframes cloud-move {
            from { left: -20%; }
            to { left: 120%; }
        }
        
        @keyframes spin-sun {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>

<body>
    <!-- èƒŒæ™¯æ’ç•« -->
    <div class="weather-bg">
        <div class="sun">â˜€ï¸</div>
        <div class="cloud" style="top:80px; animation-duration:40s;">â˜ï¸</div>
        <div class="cloud" style="top:250px; left: -100px; font-size:4rem; animation-duration:60s;">â˜ï¸</div>
        <div class="cloud" style="top:150px; font-size:2rem; animation-duration:35s;">â˜ï¸</div>
    </div>

    <div id="loading" class="loading-screen">
        <div style="font-size: 4rem; animation: gentle-bounce 2s infinite;">ğŸŒ¤ï¸</div>
        <p style="margin-top: 20px; color: var(--muji-brown); font-weight: 500; letter-spacing: 1px;">å¤©æ°£è®€å–ä¸­...</p>
    </div>

    <!-- ç‹€æ…‹åˆ— (åŒ…å«åŸå¸‚è—¥ä¸¸ã€æ›´æ–°æ™‚é–“ã€ä¸»é¡Œåˆ‡æ›å™¨) -->
    <div class="status-bar">
        <div class="location-pill">ğŸ“ <span id="currentCity">å°åŒ—å¸‚</span></div>
        
        <div class="status-right">
            <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
            <!-- ä¸»é¡Œåˆ‡æ› (åœ–åƒå¼) - å·²ç§»å…¥ status-bar å…§ -->
            <div class="theme-switcher">
                <!-- æ·ºè‰² (MUJI) -->
                <div id="mujiThemeIcon" class="theme-icon" data-theme="muji" onclick="switchTheme('muji')">
                    <!-- æ·ºè‰²é è¦½è‰²å¡Š -->
                    <span class="theme-preview" style="background: #F8F6F1; border: 1px solid #E7E2D9;"></span> 
                    â˜€ï¸
                </div>
                <!-- æ·±è‰² -->
                <div id="darkThemeIcon" class="theme-icon" data-theme="dark" onclick="switchTheme('dark')">
                    <!-- æ·±è‰²é è¦½è‰²å¡Š -->
                    <span class="theme-preview" style="background: #2F2F2F; border: 1px solid #555555;"></span>
                    ğŸŒ™
                </div>
            </div>
        </div>
    </div>

    <div class="container" id="mainContent" style="display:none;">
        <div class="city-selector" id="citySelector"></div>
        <div id="heroCard"></div>

        <h3 class="section-title"><span>ğŸ•’</span> ç¨å¾Œé å ±</h3>
        <div class="scroll-container" id="futureForecasts"></div>
    </div>

    <script>
        const API_BASE_URL = "https://weather-tzuhan.zeabur.app/api/weather";
        let currentCity = "taipei";
        const cities = [
            { id: "taipei", name: "å°åŒ—" },
            { id: "newtaipei", name: "æ–°åŒ—" },
            { id: "taoyuan", name: "æ¡ƒåœ’" },
            { id: "taichung", name: "å°ä¸­" },
            { id: "tainan", name: "å°å—" },
            { id: "kaohsiung", name: "é«˜é›„" }
        ];

        /* ===============================
           ğŸ¨ ä¸»é¡Œåˆ‡æ›é‚è¼¯èˆ‡é¡è‰²å„ªåŒ–
        =============================== */
        const themes = {
            muji: {
                // æ·ºè‰²æ¨¡å¼ (MUJI)
                '--muji-bg': '#F8F6F1',
                '--muji-card': '#FFFFFF',
                '--muji-cream': '#FFFDF8',
                '--muji-green': '#DDECE2',
                '--muji-text': '#4A4A4A',
                '--muji-line': '#E7E2D9',
                '--muji-brown': '#7B6C57',  // æ·ºè‰²æ¨¡å¼å¼·èª¿å­— (æ·±æ£•è‰²)
                '--muji-orange': '#F8DCC4', // Location Pill BG (æŸ”å’Œæ©˜)
                '--active-bg': '#DDECE2',   // Active City/Pill BG (MUJI Green)
                '--active-text': '#7B6C57'  // Active City/Pill Text (MUJI Brown)
            },
            dark: {
                // æ·±è‰²æ¨¡å¼ (å’Œè«§ç‰ˆ - ä»¿ç…§æ·ºè‰²é…è‰²ä½†é¡è‰²åŠ æ·±)
                '--muji-bg': '#2F2F2F',
                '--muji-card': '#3B3B3B',
                '--muji-cream': '#444444',
                
                '--muji-text': '#F5F5F5',   // ä¸€èˆ¬æ–‡å­—é¡è‰²
                '--muji-line': '#555555',

                // 1. å¼·èª¿å­— (å–ä»£äº®è—è‰²ï¼Œæ”¹ç”¨æŸ”å’Œç±³ç™½/æ·ºé‡‘)
                '--muji-brown': '#F0E0D0',  
                
                // 2. Location Pill BG (å–ä»£è—ç°è‰²ï¼Œæ”¹ç”¨æ·±æ©˜/æ£•è‰²)
                '--muji-orange': '#584B3E', 
                
                // 3. Active City/Period BG (å–ä»£è—ç°è‰²ï¼Œæ”¹ç”¨æ·±ç¶ è‰²)
                '--muji-green': '#425247', 
                
                // Active City/Pill BG (æ·±ç¶ è‰²)
                '--active-bg': '#425247',   
                // Location Pill Text / Active City Text (ç¢ºä¿æœ‰é«˜å°æ¯”çš„æ–‡å­—)
                '--active-text': '#F5F5F5',
                
                // ===== æ–°å¢ï¼šæ·±è‰²æ¨¡å¼ä¸‹çš„é å ±å¡ç‰‡å’Œæ™‚é–“æ©˜è‰² =====
                '--muji-orange-dark': '#E8B8A0'
            }
        };

        function switchTheme(themeName) {
            const mujiIcon = document.getElementById('mujiThemeIcon');
            const darkIcon = document.getElementById('darkThemeIcon');
            const body = document.body;

            // 1. æ›´æ–°æŒ‰éˆ•æ¨£å¼
            if (themeName === 'muji') {
                mujiIcon.classList.add('active');
                darkIcon.classList.remove('active');
                body.classList.remove('dark-mode');
            } else { // themeName === 'dark'
                mujiIcon.classList.remove('active');
                darkIcon.classList.add('active');
                body.classList.add('dark-mode');
            }

            // 2. å¥—ç”¨è®Šæ•¸
            const theme = themes[themeName];
            const root = document.documentElement;
            for (const key in theme) {
                root.style.setProperty(key, theme[key]);
            }
        }

        /* ===============================
           â˜€ï¸ è¼”åŠ©åŠŸèƒ½
        =============================== */
        function getWeatherIcon(weather) {
            if (!weather) return "ğŸŒ¤ï¸";
            if (weather.includes("é›·")) return "âš¡";
            if (weather.includes("é›¨")) return "ğŸŒ§ï¸";
            if (weather.includes("é™°")) return "â˜ï¸";
            if (weather.includes("å¤šé›²")) return "â›…";
            if (weather.includes("æ™´")) return "â˜€ï¸";
            return "ğŸŒ¤ï¸";
        }

        function getTimePeriod(startTime) {
            const date = new Date(startTime);
            const hour = date.getHours();
            if (hour >= 5 && hour < 11) return "æ—©æ™¨";
            if (hour >= 11 && hour < 14) return "ä¸­åˆ";
            if (hour >= 14 && hour < 18) return "ä¸‹åˆ";
            if (hour >= 18 && hour < 23) return "æ™šä¸Š";
            return "æ·±å¤œ";
        }

        // å‹•æ…‹èƒŒæ™¯è¨­å®š
        function setWeatherBg(weather) {
            const body = document.body;
            const sun = document.querySelector('.sun');
            const clouds = document.querySelectorAll('.cloud');

            // ç§»é™¤èˆŠç‹€æ…‹
            body.classList.remove('bg-sunny','bg-cloudy','bg-rainy','bg-night');
            sun.style.display = 'none';
            clouds.forEach(c => c.style.display='none');

            // æ ¹æ“šå¤©æ°£å¥—ç”¨
            if(weather.includes("æ™´")) {
                body.classList.add('bg-sunny');
                sun.style.display='block';
            } else if(weather.includes("å¤šé›²") || weather.includes("é™°")) {
                body.classList.add('bg-cloudy');
                clouds.forEach(c=>c.style.display='block');
            } else if(weather.includes("é›¨") || weather.includes("é›·")) {
                body.classList.add('bg-rainy');
            } else {
                body.classList.add('bg-night'); // é è¨­æˆ–æ™šä¸Š
            }
        }

        /* ===============================
           ğŸš€ æ ¸å¿ƒæ¸²æŸ“èˆ‡ API
        =============================== */
        function renderWeather(data){
            const forecasts = data.forecasts;
            const current = forecasts[0];
            const others = forecasts.slice(1);
            const avgTemp = Math.round((parseInt(current.maxTemp)+parseInt(current.minTemp))/2);
            const period = getTimePeriod(current.startTime);

            // æ›´æ–°èƒŒæ™¯
            setWeatherBg(current.weather);

            // æ’å…¥ Hero Card
            document.getElementById('heroCard').innerHTML = `
                <div class="hero-card">
                    <div class="hero-period">${period}</div>
                    <div class="hero-temp-container">
                        <div class="hero-icon">${getWeatherIcon(current.weather)}</div>
                        <div class="hero-temp">${avgTemp}Â°</div>
                    </div>
                    <div class="hero-desc">${current.weather}</div>
                    <div class="advice-grid">
                        <div class="advice-item"><span class="advice-label">é™é›¨æ©Ÿç‡</span><span class="advice-text" style="color:#7B9EBD;">ğŸ’§${current.rain}</span></div>
                        <div class="advice-item"><span class="advice-label">é«”æ„Ÿèˆ’é©</span><span class="advice-text">${current.comfort}</span></div>
                        <div class="advice-item"><span class="advice-label">æœ€ä½æº«</span><span class="advice-text">${current.minTemp}</span></div>
                        <div class="advice-item"><span class="advice-label">æœ€é«˜æº«</span><span class="advice-text">${current.maxTemp}</span></div>
                    </div>
                </div>
            `;

            // æ’å…¥ç¨å¾Œé å ±
            const scrollContainer = document.getElementById('futureForecasts');
            scrollContainer.innerHTML='';
            const today = new Date().getDate();
            
            others.forEach((f,i)=>{
                let periodName = getTimePeriod(f.startTime);
                if(new Date(f.startTime).getDate()!==today) periodName="æ˜å¤©"+periodName;
                
                scrollContainer.innerHTML+=`
                    <div class="mini-card" style="animation-delay:${i*0.1}s">
                        <div class="mini-time">${periodName}</div>
                        <div class="mini-icon">${getWeatherIcon(f.weather)}</div>
                        <div class="mini-temp">${Math.round((parseInt(f.maxTemp)+parseInt(f.minTemp))/2)}Â°</div>
                        <div class="mini-rain">ğŸ’§${f.rain}</div>
                    </div>
                `;
            });

            // æ›´æ–°æ™‚é–“
            const now = new Date();
            document.getElementById('updateTime').textContent = 
                `${now.getMonth() + 1}/${now.getDate()} ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')} æ›´æ–°`;
        }

        function renderCityButtons() {
            const selector = document.getElementById('citySelector');
            selector.innerHTML = '';
            cities.forEach(city => {
                const btn = document.createElement('button');
                btn.className = `city-btn ${city.id === currentCity ? 'active' : ''}`;
                btn.textContent = city.name;
                btn.onclick = () => handleCityClick(city.id);
                selector.appendChild(btn);
            });
        }

        function handleCityClick(cityId) {
            if (cityId === currentCity) return;
            currentCity = cityId;
            // ç”±æ–¼åŸå¸‚æŒ‰éˆ•çš„ active æ¨£å¼ä¾è³´æ–¼ --muji-brownï¼Œ
            // é€™è£¡é‡æ–°æ¸²æŸ“æŒ‰éˆ•æœƒç¢ºä¿åœ¨ä¸»é¡Œåˆ‡æ›å¾Œé¡è‰²æ­£ç¢ºã€‚
            renderCityButtons(); 
            fetchWeather();
        }

        async function fetchWeather() {
            const loading = document.getElementById('loading');
            const content = document.getElementById('mainContent');
            
            if(content.style.display === 'none') {
                loading.classList.remove('hidden');
            }

            try {
                const minLoadingTime = new Promise(resolve => setTimeout(resolve, 800));
                const apiReq = fetch(`${API_BASE_URL}/${currentCity}`).then(res => res.json());
                
                const [_, result] = await Promise.all([minLoadingTime, apiReq]);

                if (result.success) {
                    renderWeather(result.data);
                    content.style.display = 'block';
                    loading.classList.add('hidden');
                } else {
                    console.error("è³‡æ–™è®€å–å¤±æ•—");
                    loading.classList.add('hidden');
                }
            } catch (error) {
                console.error(error);
                loading.classList.add('hidden');
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            // é è¨­å•Ÿå‹•æ·±è‰²æ¨¡å¼ (ä½¿ç”¨æ–°çš„åœ–åƒå¼æŒ‰éˆ•)
            switchTheme('dark'); 
            
            // æ­£å¸¸æµç¨‹
            renderCityButtons();
            fetchWeather();
        });
    </script>
</body>
</html>